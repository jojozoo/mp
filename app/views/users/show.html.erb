<%= render "header" %>
<div class="row">
    <div class="col-md-12">
        <script type="text/javascript" src="/javascripts/masload.js?v=<%= Time.now.to_i %>"></script>
        <div class="row photos" id="container">
            <%= render partial: 'photos/thumb', collection: @photos, as: :photo %>
            <div id="page_loading" page="2" state="static" url="<%= waterfall_photos_path(order: params[:order]) %>">
                <img src="/images/loading.gif">
                <span>加载中...</span>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
$(function(){
    var container = $('#container');
    container.imagesLoaded(function(){
        container.masonry({
            itemSelector : '.col-sm-6.col-md-3',
            transitionDuration: '0.8s',
            hiddenStyle: { opacity: 0 },
            visibleStyle: { opacity: 1}
        });
        $('.col-sm-6.col-md-3').animate({'opacity': 1}, 500);
    });
})
</script>