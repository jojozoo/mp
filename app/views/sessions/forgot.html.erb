<div class="forgot_password">
	<div class="page-header">
		<h3> <i class="icon-email"></i>
			找回密码
		</h3>
	</div>
	<%= form_tag '/forgot', method: :post, class: 'form-inline' %>
		<div class="form-group <%= 'has-error' if params[:callback].eql?('notfound') %>">
			<label class="sr-only" for="username">帐户</label>
			<input type="text" id="username" name="username" class="form-control" placeholder="帐号/邮箱/手机号" style="width:300px;" value="<%= params[:username] %>">
			<p class="help-block"><%= '帐号不存在' if params[:callback].eql?('notfound') %></p>
		</div>
		<div class="form-group">
			<input type="submit" id="submit-push-forgot" class="btn btn-info" value="找回密码">
		</div>
	<%# end %>
	</form>
</div>
<script>
	$(function(){
		$("#submit-push-forgot").click(function(){
			var username = $(this).parents("form").find("#username");
			var value    = $.trim(username.val());
			if(value === ''){
				username.parent().addClass('has-error');
				username.next().text('不能为空');
				return false;
			} else {
				if(!/^(?:\w+\.?)*\w+@(?:\w+\.)+\w+$/.test(value) && !/^(([0\+]\d{2,3}-)?(0\d{2,3})-)?(\d{7,8})(-(\d{3,}))?$/.test(value) && !/[\w\u4e00-\u9fa5]{2,10}/.test(value)){
					username.parent().addClass('has-error');
					username.next().text('帐号格式不正确');
					return false;
				}
			}
		});
	})
	
</script>
