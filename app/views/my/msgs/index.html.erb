<style type="text/css">
.list-group-item:first-child{
	border-top-right-radius: 0;
	border-top-left-radius: 0;
}
.list-group-item:last-child{
	border-bottom-right-radius: 0;
	border-bottom-left-radius: 0;
}
.list-group-item{
	margin-bottom: 0;
	border: none;
	border-bottom: 1px solid #dddddd;
}
.unread{
	background: #fffced;
}
.list-group-item img{
	margin-right: 10px;
}
.opera a{
	margin-right: 10px;
	font-size: 12px;
	color: #999;
	display: none;
	text-decoration: none;
}
.text-desc, .text-desc:hover{
	text-decoration: none;
	color: #333333;
}
</style>
<div class="list-group">
<% @talks.each do |talk| %>
	<div class="list-group-item <%= 'unread' if talk.unread? %>">
		<%= link_to image_tag('/images/defaults/users.jpg', class: 'avatar img-circle'), 'javascript:void(0);' %>
		<div class="list-group-item-heading">
			<%= link_to talk.user.username, "javascript:void(0);" %>
			<span class="pull-right">
				<%= talk.updated_at.to_date %>
			</span>
		</div>
		<div class="list-group-item-text">
			<%= link_to talk.content, my_msg_path(talk.id), class: 'text-desc' %>
			<div class="pull-right opera">
				<a class="transh" href="javascript:void(0);" title="真的要标记为垃圾漫信？">垃圾漫信</a>
				<%= link_to '删除', my_msg_path(talk.id), method: :delete, data: { confirm: "将删除整个对话, 是否确定?" } %>
				<input type="checkbox" name="tid[]" class="check-tid">
			</div>
		</div>
		<div class="clearfix"></div>
	</div>
<% end %>
</div>
<div style="padding: 0 16px;height: 26px;margin-top: -15px;">
	<div class="pull-right">
		<a class="btn-default btn btn-xs del-all" href="javascript:void(0);" style="margin-right:10px;">删除</a>
		<input type="checkbox" class="check-all">
	</div>
</div>
<%= will_paginate @talks %>

<script type="text/javascript">
$(function(){
	$(".list-group-item").hover(function(){
		$(this).find('.opera a').show();
	}, function(){
		$(this).find('.opera a').hide();
	});
	$(".transh").click(function(){
		alert('暂未实现');
		return false;
	});
	$("input.check-all").click(function(){
		if($(this).is(':checked')){
			$("input.check-tid").attr("checked", true);
		} else {
			$("input.check-tid").removeAttr("checked");
		}
		
	});
});
</script>