<script type="text/javascript" src="/javascripts/profile.js"></script>
<%= simple_form_for current_user, url: my_set_path('update'), validate: true do |f| %>
	<%= f.input :username, disabled: true %>
	<%= f.input :email, disabled: true %>
	<%= f.input :mobile %>
	<%= f.input :realname %>
	<%= f.input :province, as: :hidden %>
	<%= f.input :city, as: :hidden %>
	<div class="form-group string choose-point">
		<label class="string optional col-sm-2 control-label" for="choose-point">常驻地</label>
		<div class="col-sm-6 input-text-add">
			<div class="input-group" id="choose-point">
				<input class="form-control" type="text" readonly="" id="city-input" value="<%= current_user.addr %>">
				<span class="input-group-addon">
					<i class="icon-map-marker"></i>
				</span>
			</div>
		</div>
	</div>
	<div class="form-group radio_buttons optional user_gender">
		<label class="radio_buttons optional col-sm-2 control-label">性别</label>
		<div class="col-sm-6 input-text-add">
			<label class="radio-inline" for="user_gender_true">
				<input type="radio" id="user_gender_true" value="true" name="user[gender]" <%= 'checked=""' if current_user.gender == true %>>男
			</label>
			<label class="radio-inline" for="user_gender_false" style="padding-left:40px;">
				<input type="radio" id="user_gender_false" value="false" name="user[gender]" <%= 'checked=""' if current_user.gender == false %>>女
			</label>
		</div>
	</div>
	<%= f.input :site %>
	<%= f.input :domain, disabled: current_user.domain.present? %>
	<%= f.input :profession %>
	<%= f.input :duty, :as => :datepicker %>
	<div class="form-group string optional user_warrant">
		<label class="col-sm-2 control-label">默认版权声明</label>
		<div class="col-sm-6 input-text-add">
			<div class="agreement-nav">
				<input type="checkbox" id="open-agreement">
				<label for="open-agreement">开启知识共享协议</label>
			</div>
			<div class="hide" id="agreement">
				<% User::WARRANT.each do |k, v| %>
				<div class="warrant-row">
					<input type="radio" id="warrant<%= k %>" name="user[warrant]" value="<%= k %>" <%= 'checked=""' if current_user.warrant.eql?(k) %>>
					<label for="warrant<%= k %>">
						<% User::WARRANTVAL[k].each do |row| %>
							<span class="cc-<%= row %>"></span>
						<% end %>
						<span class="cc-h"><%= v %></span>
					</label>
				</div>
				<% end %>
			</div>
		</div>
	</div>
	<%= f.input :resume, as: :text, input_html:{rows: 3} %>
	<%= f.submit '保存', class: 'btn btn-default col-sm-offset-7' %>
<% end %>
<div class="modal fade" id="my-city">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">常驻地选择</h4>
			</div>
			<div class="modal-body">
				<div class="provinces"></div>
				<div class="cities"></div>
			</div>
		</div>
	</div>
</div>

<style type="text/css">
.agreement-nav{
	margin-top: 6px;
}
.warrant-row {
	position: relative;
	height: 28px;
	line-height: 28px;
	color: #8f8f8f;
}
.warrant-row input{
	float: left;
	display: inline;
	margin-top: 8px;
	margin-right: 8px;
}
.warrant-row span {
	background: url(/images/warrant.png) no-repeat -3px 4px;
	width: 16px;
	height: 28px;
	float: left;
	display: inline;
	margin-right: 3px;
	font-size: 12px;
}
.warrant-row span.cc-1 {
	background-position: -37px 4px;
}
.warrant-row span.cc-2 {
	background-position: -20px 4px;
}
.warrant-row span.cc-3 {
	background-position: -54px 4px;
}
.warrant-row span.cc-5 {
	visibility: hidden;
}
.warrant-row span.cc-h {
	width: auto;
	height: auto;
	background: none;
	margin-left: 3px;
}
.city-row{
	margin-right: 10px;
}
.cities{
	border-top: 1px solid #ccc;
	margin-top: 10px;
	padding-top: 10px;
}
</style>